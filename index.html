<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Celebs Ki Gaddi</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --primary-color: #E74C3C; /* Vibrant Red */
            --background-color: #f4f4f5;
            --card-color: #ffffff;
            --text-color: #18181b;
            --subtle-text-color: #71717a;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--background-color);
            color: var(--text-color);
            -webkit-tap-highlight-color: transparent;
        }

        /* --- SPLASH SCREEN --- */
        #splash-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #18181b; display: flex; align-items: center; justify-content: center;
            z-index: 9999; transition: opacity 0.5s ease-out, visibility 0.5s ease-out;
        }
        #splash-screen.hidden { opacity: 0; visibility: hidden; }
        .splash-logo { font-size: 2.5em; font-weight: 700; color: #fff; text-align: center; }
        .splash-logo span { color: var(--primary-color); }

        /* --- HEADER --- */
        .app-header {
            position: fixed; top: 0; left: 0; width: 100%;
            padding: 15px 20px; z-index: 1000;
            display: flex; align-items: center; justify-content: space-between;
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid #e5e5e5;
        }
        .app-logo { font-size: 1.5em; font-weight: 700; }
        .app-logo span { color: var(--primary-color); }
        #refresh-btn { background: none; border: none; cursor: pointer; padding: 5px; }
        #refresh-btn svg { width: 24px; height: 24px; fill: var(--subtle-text-color); transition: transform 0.5s ease; }
        #refresh-btn.loading svg { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* --- APP STRUCTURE --- */
        .app-container { padding: 80px 15px 80px 15px; }
        .app-page { display: none; }
        .app-page.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        h1 { font-size: 1.8em; margin-bottom: 20px; }

        /* --- NEWS FEED --- */
        .news-grid { display: grid; gap: 20px; }
        .article-card {
            background-color: var(--card-color); border-radius: 12px;
            box-shadow: var(--shadow); overflow: hidden; text-decoration: none;
            color: var(--text-color); display: block;
        }
        .card-image { width: 100%; height: 180px; object-fit: cover; }
        .card-content { padding: 15px; }
        .card-content h3 { font-size: 1.1em; font-weight: 600; line-height: 1.4; margin-bottom: 10px; }
        .card-meta { font-size: 0.8em; color: var(--subtle-text-color); }
        .loader { text-align: center; padding: 40px; font-size: 1.1em; color: var(--subtle-text-color); }

        /* --- REFER & EARN --- */
        .card { background-color: var(--card-color); padding: 25px; border-radius: 12px; box-shadow: var(--shadow); margin-bottom: 20px; }
        .referral-code-box { text-align: center; }
        .referral-code { font-size: 1.8em; font-weight: 700; letter-spacing: 2px; }
        .share-btn { display: block; width: 100%; text-align: center; background-color: var(--primary-color); color: #fff; padding: 15px; border-radius: 8px; text-decoration: none; font-weight: 600; cursor: pointer; border: none; font-size: 1em; margin-top: 20px; }
        #claim-reward-btn { display: none; }

        /* --- CLAIM MODAL --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.6); z-index: 2000; display: none; align-items: center; justify-content: center; }
        .modal-content { background-color: var(--card-color); padding: 30px; border-radius: 12px; width: 90%; max-width: 400px; }
        .modal-content h2 { text-align: center; }
        .modal-content .form-group { margin-bottom: 15px; }
        .modal-content label { display: block; margin-bottom: 5px; font-weight: 600; }
        .modal-content input { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 1em; }
        .modal-buttons { display: flex; gap: 10px; margin-top: 20px; }
        .modal-buttons button { flex-grow: 1; padding: 12px; border-radius: 8px; border: none; cursor: pointer; font-weight: 600; }
        #submit-claim-btn { background-color: var(--primary-color); color: #fff; }
        #close-modal-btn { background-color: #eee; color: #333; }

        /* --- BOTTOM NAVIGATION --- */
        .bottom-nav { position: fixed; bottom: 0; left: 0; width: 100%; height: 65px; background-color: var(--card-color); display: flex; justify-content: space-around; align-items: center; box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); border-top: 1px solid #e5e5e5; z-index: 1000; }
        .nav-item { display: flex; flex-direction: column; align-items: center; justify-content: center; cursor: pointer; color: var(--subtle-text-color); transition: color 0.3s; flex-grow: 1; }
        .nav-item svg { width: 24px; height: 24px; margin-bottom: 4px; fill: currentColor; }
        .nav-item span { font-size: 0.75em; }
        .nav-item.active { color: var(--primary-color); }
    </style>
</head>
<body>

    <div id="splash-screen">
        <div class="splash-logo">Celebs Ki <span>Gaddi</span></div>
    </div>

    <div id="app-content" style="display: none;">
        <header class="app-header">
            <div class="app-logo">Celebs Ki <span>Gaddi</span></div>
            <button id="refresh-btn" title="Refresh Feed">
                <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
            </button>
        </header>

        <div class="app-container">
            <!-- PAGE 1: NEWS FEED -->
            <section id="news-page" class="app-page active">
                <div class="news-grid" id="news-feed">
                    <p class="loader">Loading latest news...</p>
                </div>
            </section>

            <!-- PAGE 2: REFER & EARN -->
            <section id="refer-page" class="app-page">
                <h1>Refer & Earn</h1>
                <div class="card">
                    <p style="text-align:center;">Refer 5 friends and get a <b>₹50 - ₹100 Amazon Gift Card!</b></p>
                    <div class="referral-code-box">
                        <span class="referral-code" id="referral-code">LOADING...</span>
                    </div>
                    <button class="share-btn" id="share-btn">Share Your Link</button>
                </div>
                <div class="card">
                    <h3>Your Progress</h3>
                    <p id="progress-text">You have 0 / 5 successful referrals.</p>
                    <button class="share-btn" id="claim-reward-btn">Claim Reward</button>
                </div>
            </section>
        </div>

        <nav class="bottom-nav">
            <div class="nav-item active" data-page="news-page">
                <svg viewBox="0 0 24 24"><path d="M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm10 8h-8v-2h8v2zm0-4h-8v-2h8v2zm0-4h-8V7h8v2z"/></svg>
                <span>News Feed</span>
            </div>
            <div class="nav-item" data-page="refer-page">
                <svg viewBox="0 0 24 24"><path d="M22 12h-4V7c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v5H2v5h4v-5h2v5h8v-5h2v5h4v-5zm-6-5c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM8 7c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/></svg>
                <span>Rewards</span>
            </div>
        </nav>
    </div>

    <!-- CLAIM REWARD MODAL (POPUP) -->
    <div class="modal-overlay" id="claim-modal">
        <div class="modal-content">
            <h2>Claim Your Reward!</h2>
            <p style="text-align:center; color: var(--subtle-text-color); margin-bottom: 20px;">Please provide your details to receive the gift card.</p>
            <!-- =================================================================== -->
            <!-- ===== ⚠️ IMPORTANT: YAHAN APNA FORMSPREE URL PASTE KAREIN ========= -->
            <!-- =================================================================== -->
            <form id="claim-form" action="https://formspree.io/f/xgvzjool" method="POST">
                <div class="form-group">
                    <label for="claim-name">Your Name</label>
                    <input type="text" id="claim-name" name="name" required>
                </div>
                <div class="form-group">
                    <label for="claim-contact">Email or WhatsApp No.</label>
                    <input type="text" id="claim-contact" name="contact" required>
                </div>
                <input type="hidden" id="hidden-ref-code" name="referral_code">
                <div class="modal-buttons">
                    <button type="button" id="close-modal-btn">Cancel</button>
                    <button type="submit" id="submit-claim-btn">Submit Claim</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const splashScreen = document.getElementById('splash-screen');
            const appContent = document.getElementById('app-content');
            const newsFeed = document.getElementById('news-feed');
            const navItems = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.app-page');
            const refreshBtn = document.getElementById('refresh-btn');

            // --- APP INITIALIZATION ---
            function initApp() {
                splashScreen.classList.add('hidden');
                appContent.style.display = 'block';
                fetchNews();
                initReferralSystem();
            }
            setTimeout(initApp, 2000);

            // --- NAVIGATION ---
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    const targetPageId = item.getAttribute('data-page');
                    pages.forEach(page => page.classList.toggle('active', page.id === targetPageId));
                    navItems.forEach(nav => nav.classList.toggle('active', nav === item));
                });
            });

            // --- NEWS FEED LOGIC ---
            function fetchNews() {
                newsFeed.innerHTML = '<p class="loader">Loading latest news...</p>';
                refreshBtn.classList.add('loading');
                // ===================================================================
                // ===== ⚠️ IMPORTANT: YAHAN APNE BLOG KA URL DAALEIN ================
                // ===================================================================
                const rssUrl = 'https://celebskigaddi.blogspot.com/feeds/posts/default?alt=rss'; 
                const apiUrl = `https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(rssUrl)}`;

                fetch(apiUrl)
                    .then(response => response.json())
                    .then(data => {
                        newsFeed.innerHTML = '';
                        if (data.status === 'ok' && data.items.length > 0) {
                            data.items.forEach(article => {
                                const tempDiv = document.createElement('div');
                                tempDiv.innerHTML = article.description;
                                const firstImage = tempDiv.querySelector('img');
                                const imageUrl = firstImage ? firstImage.src : 'https://via.placeholder.com/400x180.png?text=CelebsKiGaddi';
                                const articleCard = `<a href="${article.link}" target="_blank" class="article-card"><img src="${imageUrl}" alt="${article.title}" class="card-image"><div class="card-content"><h3>${article.title}</h3><p class="card-meta">${new Date(article.pubDate).toLocaleDateString()}</p></div></a>`;
                                newsFeed.innerHTML += articleCard;
                            });
                        } else {
                            newsFeed.innerHTML = '<p class="loader">No articles found.</p>';
                        }
                    }).catch(error => {
                        newsFeed.innerHTML = '<p class="loader">Could not load news.</p>';
                    })
                    .finally(() => {
                        setTimeout(() => { refreshBtn.classList.remove('loading'); }, 500);
                    });
            }
            refreshBtn.addEventListener('click', fetchNews);

            // --- REFER & EARN LOGIC ---
            const referralCodeEl = document.getElementById('referral-code');
            const progressTextEl = document.getElementById('progress-text');
            const claimBtn = document.getElementById('claim-reward-btn');
            const shareBtn = document.getElementById('share-btn');
            const claimModal = document.getElementById('claim-modal');
            const closeModalBtn = document.getElementById('close-modal-btn');
            const claimForm = document.getElementById('claim-form');
            const hiddenRefCodeInput = document.getElementById('hidden-ref-code');

            let userInfo = {};

            function generateRefCode() {
                return 'CKG' + Math.random().toString(36).substring(2, 7).toUpperCase();
            }

            function initReferralSystem() {
                const storedUser = localStorage.getItem('celebsKiGaddiUser');
                if (storedUser) {
                    userInfo = JSON.parse(storedUser);
                } else {
                    userInfo = { refCode: generateRefCode(), refCount: 0 };
                    localStorage.setItem('celebsKiGaddiUser', JSON.stringify(userInfo));
                }
                updateReferralUI();
            }

            function updateReferralUI() {
                referralCodeEl.textContent = userInfo.refCode;
                hiddenRefCodeInput.value = userInfo.refCode;
                const count = userInfo.refCount;
                progressTextEl.textContent = `You have ${count} / 5 successful referrals.`;
                if (count >= 5) {
                    claimBtn.style.display = 'block';
                } else {
                    claimBtn.style.display = 'none';
                }
            }
            
            // Helper function for you to test the claim button.
            // In browser console, type: incrementReferrals() and press Enter.
            window.incrementReferrals = function() {
                userInfo.refCount++;
                localStorage.setItem('celebsKiGaddiUser', JSON.stringify(userInfo));
                updateReferralUI();
                alert("Referral count increased to: " + userInfo.refCount);
            }

            shareBtn.addEventListener('click', () => {
                const shareUrl = `${window.location.href}?ref=${userInfo.refCode}`;
                const shareText = `Check out the Celebs Ki Gaddi app for the latest Bollywood news! Download using my link: ${shareUrl}`;
                if (navigator.share) {
                    navigator.share({ title: 'Celebs Ki Gaddi', text: shareText });
                } else {
                    alert(shareText);
                }
            });

            claimBtn.addEventListener('click', () => { claimModal.style.display = 'flex'; });
            closeModalBtn.addEventListener('click', () => { claimModal.style.display = 'none'; });
            claimForm.addEventListener('submit', () => {
                setTimeout(() => {
                    claimModal.style.display = 'none';
                    alert('Thank you! Your claim has been submitted. We will verify and contact you shortly.');
                }, 500);
            });

        });
    </script>

</body>
</html>